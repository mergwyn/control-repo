---

classes:
  - role::mac_laptop

managedmac::organization:                               "The Clark family"
#managedmac::ntp::enable:                                true
#managedmac::ntp::servers:
#  - bravo.%{::domain}
#  - alpha.%{::domain}
#  - time.euro.apple.com
#  - time.apple.com

managedmac::loginwindow::loginwindow_text:              "This is %{::hostname}"
managedmac::loginwindow::show_name_and_password_fields: true
managedmac::loginwindow::enable_fast_user_switching:    true
managedmac::loginwindow::hide_admin_users:              false

managedmac::activedirectory::enable:                    true
#managedmac::activedirectory::evaluate:                 "%{::domain_available?}"
managedmac::activedirectory::evaluate:                  "yes"
managedmac::activedirectory::provider:                  dsconfigad
managedmac::activedirectory::hostname:                  "%{::domain}"
managedmac::activedirectory::username:                  "administrator"
managedmac::activedirectory::password:                  "%{hiera('secrets::admin')}"
managedmac::activedirectory::computer:                  "%{::hostname}"
managedmac::activedirectory::mount_style:               smb
managedmac::activedirectory::create_mobile_account_at_login: true
managedmac::activedirectory::force_home_local:          true
managedmac::activedirectory::warn_user_before_creating_ma: true
managedmac::activedirectory::useuncpath:                false
managedmac::activedirectory::use_windows_unc_path:      true
managedmac::activedirectory::default_user_shell:        "/bin/bash"
managedmac::activedirectory::map_uid_attribute:         "uidNumber"
managedmac::activedirectory::map_gid_attribute:         "gidNumber"
managedmac::activedirectory::map_ggid_attribute:        "gidNumber"
managedmac::activedirectory::domain_admin_group_list:
  - THECLARKHOME\Administrators
  - THECLARKHOME\Domain Admins
  - THECLARKHOME\Enterprise Admins

#managedmac::loginhook::enable:                          true
#managedmac::logouthook::enable:                         true
#
managedmac::screensharing::enable:                      true
managedmac::ssh::enable:                                true
#managedmac::ssh::sshd_config:                           'puppet:///modules/your_module/sshd_config'
managedmac::mobileconfigs::defaults::description:       'Installed by Puppet.'
managedmac::mobileconfigs::defaults::organization:      'The Clark Home'

managedmac::portablehomes::enable:                      true
managedmac::portablehomes::menuExtra:                   on
managedmac::portablehomes::isNewMobileAccount:          false
managedmac::portablehomes::periodicSyncOn:              false
managedmac::portablehomes::syncPeriodSeconds:           1200
managedmac::portablehomes::syncOnChange:                false
managedmac::portablehomes::replaceUserSyncList:         false
managedmac::portablehomes::replaceUserPrefSyncList:     false
managedmac::portablehomes::syncedFolders:
  - '~'
managedmac::portablehomes::syncedPrefFolders:
  - '~/Documents/Microsoft User Data'
  - '~/Library/Fonts'
  - '~/Documents/Microsoft User Data'
  - '~/Library/Preferences'
  - '~/Library/Keychains'
  - '~/Library/Application Support/Firefox'
  - '~/Library/Application Support/Google'
  - '~/Library/Application Support/LaunchBar'
  - '~/Library/Application Support/TextMate'
  - '~/Library/Application Support/Terminal'
  - '~/Library/Application Support/Textual'
  - '~/Library/Application Support/Sublime Text 2'
  - '~/Library/Application Support/Zimbra'
  - '~/Library/Application Support/Screen Sharing'
  - '~/Library/Application Support/Remote Desktop'
  - '~/Library/Application Support/Omni Group'
  - '~/Library/Application Support/Microsoft'
  - '~/Library/Application Support/Cyberduck'
  - '~/Library/Application Support/Adium 2.0'
  - '~/Library/Calendars'
  - '~/Library/Safari'
  - '~/Library/Services'
  - '~/Library/Widgets'
  - '~/Library/StickiesDatabase'
  - '~/Library/Recent Servers'
  - '~/Library/Application Support/Skype'

managedmac::portablehomes::excludedItems:
  fullPath:
    - '~/.SymAVQSFile'
    - '~/.Trash'
    - '~/.Trashes'
    - '~/Documents/Microsoft User Data'
    - '~/Library'
    - '~/NAVMac800QSFile'
    - '~/Music/iTunes'
    - '~/Pictures/iPhoto Library'
    - '~/Documents/Virtual Machines'
    - '~/Documents/Parallels'
    - '~/Movies'
    - '~/Pictures/Photo Booth'
    - '~/Documents/Virtual Machines.localized'
    - '~/Dropbox'
    - '~/.crxde'
    - '~/Documents/Virtual PC'
    - '~/.dropbox'
    - '~/Downloads'
    - '~/Personal'
    - '~/Documents/Final Cut Express Documents'
    - '~/Google Drive'
  endsWith:
    - '.vmwarevm'
    - '.idlk'
    - '.aplibrary'
  is:
    - 'addons.sqlite'

managedmac::portablehomes::excludedPrefItems:
  fullPath:
    - '~/.SymAVQSFile'
    - '~/Documents/Microsoft User Data/Entourage Temp'
    - '~/Library/Application Support/SyncServices'
    - '~/Library/Application Support/MobileSync'
    - '~/Library/Caches'
    - '~/Library/Calendars/Calendar Cache'
    - '~/Library/Logs'
    - '~/Library/Mail/AvailableFeeds'
    - '~/Library/Mail/Envelope Index'
    - '~/Library/Preferences/Macromedia/Flash Player'
    - '~/Library/Printers'
    - '~/Library/PubSub/Database'
    - '~/Library/PubSub/Downloads'
    - '~/Library/PubSub/Feeds'
    - '~/Library/Safari/Icons.db'
    - '~/Library/Safari/HistoryIndex.sk'
    - '~/Library/iTunes/iPhone Software Updates'
    - '~/Library/Preferences/ByHost'
    - '~/Library/Preferences/SDMHelpData'
  is:
    - '.GlobalPreferences.plist'
    - '.localized'
    - '.DS_Store'
    - 'addons.sqlite'
  endsWith:
    - '.lockfile'
    - 'network.plist'
  regex:
    - '.*ByHost.*'
  contains:
    - '-network-'
  startsWith:
    - 'IMAP-'
    - 'Exchange-'
    - 'EWS-'
    - 'Mac-'

managedmac::portablehomes::loginPrefSyncConflictResolution:     automatic
managedmac::portablehomes::loginNonprefSyncConflictResolution:  automatic
managedmac::portablehomes::logoutPrefSyncConflictResolution:    automatic
managedmac::portablehomes::logoutNonprefSyncConflictResolution: automatic
managedmac::portablehomes::backgroundConflictResolution:        automatic
managedmac::portablehomes::syncPreferencesAtLogin:              dontSync
managedmac::portablehomes::syncPreferencesAtLogout:             dontSync
managedmac::portablehomes::syncPreferencesAtSyncNow:            dontSync
managedmac::portablehomes::syncPreferencesInBackground:         dontSync
managedmac::portablehomes::syncBackgroundSetAtLogin:            dontSync
managedmac::portablehomes::syncBackgroundSetAtLogout:           dontSync
managedmac::portablehomes::syncBackgroundSetAtSyncNow:          dontSync
managedmac::portablehomes::syncBackgroundSetInBackground:       dontSync
managedmac::portablehomes::loginPrefSuppressErrors:             false
managedmac::portablehomes::loginNonprefSuppressErrors:          false
managedmac::portablehomes::logoutPrefSuppressErrors:            false
managedmac::portablehomes::logoutNonprefSuppressErrors:         false
managedmac::portablehomes::backgroundSuppressErrors:            false
managedmac::portablehomes::firstSyncSuppressErrors:             false
managedmac::portablehomes::syncNowAllPrefsSuppressErrors:       false
managedmac::portablehomes::loginPrefSuppressConflicts:          false
managedmac::portablehomes::loginNonprefSuppressConflicts:       false
managedmac::portablehomes::logoutPrefSuppressConflicts:         false
managedmac::portablehomes::logoutNonprefSuppressConflicts:      false
managedmac::portablehomes::backgroundSuppressConflicts:         false
managedmac::portablehomes::firstSyncSuppressConflicts:          false
managedmac::portablehomes::syncNowAllPrefsSuppressConflicts:    false
managedmac::portablehomes::disableFirstSyncCancel:              false
managedmac::portablehomes::disableLoginSyncCancel:              false
managedmac::portablehomes::disableLogoutSyncCancel:             false
managedmac::portablehomes::loginSyncDialogTimeoutSeconds:       0
managedmac::portablehomes::logoutSyncDialogTimeoutSeconds:      0
managedmac::portablehomes::progressDelaySeconds:                2
managedmac::portablehomes::alertOnFailedMounts:                 false

managedmac::propertylists::defaults:
  owner: root
  group: wheel
  format: xml


#'/Library/LaunchDaemons/com.puppetlabs.puppet.plist':
#     content:
#       Label: 'com.puppetlabs.puppet'
#       OnDemand: false
#       KeepAlive: true
#       ProgramArguments:
#         - '/opt/puppetlabs/bin/puppet'
#         - 'agent'
#         - '--no-daemonize'
#         - '--logdest=syslog'
#         - '--color=false'
#       RunAtLoad: true

managedmac::propertylists::files:
  '/Library/LaunchDaemons/com.googlecode.munki.logouthelper.plist':
    content:
      Label: 'com.googlecode.munki.logouthelper'
      ProgramArguments:
        - '/usr/local/munki/logouthelper'
      RunAtLoad: true
  '/Library/LaunchDaemons/com.googlecode.munki.managedsoftwareupdate-check.plist':
    content:
      Label: 'com.googlecode.munki.managedsoftwareupdate-check'
      ProgramArguments:
        - '/usr/local/munki/supervisor'
        - 'delayrandom'
        - '3600'
        - '--timeout'
        - '43200'
        - '--'
        - '/usr/local/munki/managedsoftwareupdate'
        - '--auto'
      StartCalendarInterval:
        Minute: 60
  '/Library/LaunchDaemons/com.googlecode.munki.managedsoftwareupdate-install.plist':
    content:
      Label: 'com.googlecode.munki.managedsoftwareupdate-install'
      ProgramArguments:
        - '/usr/local/munki/supervisor'
        - '--timeout'
        - 43200
        - '--'
        - '/usr/local/munki/managedsoftwareupdate'
        - '--installwithnologout'
      KeepAlive: false
      PathState:
        '/private/tmp/.com.googlecode.munki.managedinstall.launchd': true
      OnDemand: true
  '/Library/LaunchDaemons/com.googlecode.munki.managedsoftwareupdate-manualcheck.plist':
    content:
      Label: 'com.googlecode.munki.managedsoftwareupdate-manualcheck'
      ProgramArguments:
        - '/usr/local/munki/supervisor'
        - '--timeout'
        - '43200'
        - '--'
        - '/usr/local/munki/managedsoftwareupdate'
        - '--installwithnologout'
      KeepAlive: false
      PathState:
        '/private/tmp/.com.googlecode.munki.updatecheck.launchd': true
      OnDemand: true

managedmac::files::defaults:
  owner: "root"
  group: "admin"
  ensure: file
  mode: "0644"
managedmac::files::objects:
  /etc/krb5.config:
    source: "puppet:///modules/profile/mac/krb5.conf"
    group: "wheel"
  /etc/ssh/ssh_config:
    source: "puppet:///modules/profile/mac/ssh_config"
    group: "wheel"
  /usr/local/share/com.theclarkhome.prefsync.plist:
    source: "puppet:///modules/profile/mac/com.theclarkhome.prefsync.plist"
  /usr/local/share/com.theclarkhome.logoutwatcher.plist:
    source: "puppet:///modules/profile/mac/com.theclarkhome.logoutwatcher.plist"
  /usr/local/share/Home.prf:
    source: "puppet:///modules/profile/mac/Home.prf"
  /usr/local/share/default.prf:
    source: "puppet:///modules/profile/mac/default.prf"
  /usr/local/share/Preferences.prf:
    source: "puppet:///modules/profile/mac/Preferences.prf"
  /usr/local/share/common.prf:
    source: "puppet:///modules/profile/mac/common.prf"
  /usr/local/bin/UnisonHomeSync.sh:
    source: "puppet:///modules/profile/mac/UnisonHomeSync.sh"
    mode: "0755"
  /usr/local/bin/SetupHomeSync.sh:
    source: "puppet:///modules/profile/mac/SetupHomeSync.sh"
    mode: "0755"
  /usr/local/bin/logoutwatcher.sh:
    source: "puppet:///modules/profile/mac/logoutwatcher.sh"
    mode: "0755"
  /etc/newsyslog.d/unison.conf:
    source: "puppet:///modules/profile/mac/unison.conf"
  /Library/Logs/unison.log:
    mode: "0666"



#managedmac::fibs.puppet.plistles::objects:
#  /Users/Shared/example_file_a.txt:
#    content:
#      "This is an example of how to create a file using the content parameter."
#  /Users/Shared/example_file_b.txt:
#    source: puppet:///modules/some_module/some_file.txt
#  /Users/Shared/example_directory:
#    ensure: directory
#    group: wheel
#    mode: 0755

# vim: sw=2:ai:nu expandtab
