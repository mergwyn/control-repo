---

managedmac::organization:                               "The Clark family"
#managedmac::ntp::enable:                                true
#managedmac::ntp::servers:
#  - bravo.%{::domain}
#  - alpha.%{::domain}
#  - time.euro.apple.com
#  - time.apple.com

managedmac::loginwindow::loginwindow_text:              "This is %{::hostname}"
managedmac::loginwindow::show_name_and_password_fields: true
managedmac::loginwindow::enable_fast_user_switching:    true
managedmac::loginwindow::hide_admin_users:              false

managedmac::activedirectory::enable:                    true
#managedmac::activedirectory::evaluate:                 "%{::domain_available?}"
managedmac::activedirectory::evaluate:                  "yes"
managedmac::activedirectory::provider:                  dsconfigad
managedmac::activedirectory::hostname:                  "%{::domain}"
managedmac::activedirectory::username:                  "administrator"
managedmac::activedirectory::password:                  "%{hiera('secrets::admin')}"
managedmac::activedirectory::computer:                  "%{::hostname}"
managedmac::activedirectory::mount_style:               smb
managedmac::activedirectory::create_mobile_account_at_login: true
managedmac::activedirectory::force_home_local:          true
managedmac::activedirectory::warn_user_before_creating_ma: true
managedmac::activedirectory::useuncpath:                false
managedmac::activedirectory::use_windows_unc_path:      true
managedmac::activedirectory::default_user_shell:        "/bin/bash"
managedmac::activedirectory::map_uid_attribute:         "uidNumber"
managedmac::activedirectory::map_gid_attribute:         "gidNumber"
managedmac::activedirectory::map_ggid_attribute:        "gidNumber"
managedmac::activedirectory::domain_admin_group_list:
  - THECLARKHOME\Administrators
  - THECLARKHOME\Domain Admins
  - THECLARKHOME\Enterprise Admins

#managedmac::loginhook::enable:                          true
#managedmac::logouthook::enable:                         true
#
managedmac::screensharing::enable:                      true
managedmac::ssh::enable:                                true
#managedmac::ssh::sshd_config:                           'puppet:///modules/your_module/sshd_config'
managedmac::mobileconfigs::defaults::description:       'Installed by Puppet.'
managedmac::mobileconfigs::defaults::organization:      'The Clark Home'

managedmac::portablehomes::enable:                      false

#'/Library/LaunchDaemons/com.puppetlabs.puppet.plist':
#     content:
#       Label: 'com.puppetlabs.puppet'
#       OnDemand: false
#       KeepAlive: true
#       ProgramArguments:
#         - '/opt/puppetlabs/bin/puppet'
#         - 'agent'
#         - '--no-daemonize'
#         - '--logdest=syslog'
#         - '--color=false'
#       RunAtLoad: true

managedmac::propertylists::defaults:
  owner: root
  group: wheel
  format: xml
managedmac::propertylists::files:
  '/Library/LaunchDaemons/com.googlecode.munki.logouthelper.plist':
    content:
      Label: 'com.googlecode.munki.logouthelper'
      ProgramArguments:
        - '/usr/local/munki/logouthelper'
      RunAtLoad: true
  '/Library/LaunchDaemons/com.googlecode.munki.managedsoftwareupdate-check.plist':
    content:
      Label: 'com.googlecode.munki.managedsoftwareupdate-check'
      ProgramArguments:
        - '/usr/local/munki/supervisor'
        - 'delayrandom'
        - '3600'
        - '--timeout'
        - '43200'
        - '--'
        - '/usr/local/munki/managedsoftwareupdate'
        - '--auto'
      StartCalendarInterval:
        Minute: 60
  '/Library/LaunchDaemons/com.googlecode.munki.managedsoftwareupdate-install.plist':
    content:
      Label: 'com.googlecode.munki.managedsoftwareupdate-install'
      ProgramArguments:
        - '/usr/local/munki/supervisor'
        - '--timeout'
        - 43200
        - '--'
        - '/usr/local/munki/managedsoftwareupdate'
        - '--installwithnologout'
      KeepAlive: false
      PathState:
        '/private/tmp/.com.googlecode.munki.managedinstall.launchd': true
      OnDemand: true
  '/Library/LaunchDaemons/com.googlecode.munki.managedsoftwareupdate-manualcheck.plist':
    content:
      Label: 'com.googlecode.munki.managedsoftwareupdate-manualcheck'
      ProgramArguments:
        - '/usr/local/munki/supervisor'
        - '--timeout'
        - '43200'
        - '--'
        - '/usr/local/munki/managedsoftwareupdate'
        - '--installwithnologout'
      KeepAlive: false
      PathState:
        '/private/tmp/.com.googlecode.munki.updatecheck.launchd': true
      OnDemand: true

managedmac::files::defaults:
  owner: "root"
  group: "admin"
  ensure: file
  #mode: "0644"
managedmac::files::objects:
  /etc/krb5.config:
    source: "puppet:///modules/profile/mac/krb5.conf"
    group: "wheel"
  /etc/ssh/ssh_config:
    source: "puppet:///modules/profile/mac/ssh_config"
    group: "wheel"
  /usr/local/share/com.theclarkhome.prefsync.plist:
    source: "puppet:///modules/profile/mac/com.theclarkhome.prefsync.plist"
  /usr/local/share/com.theclarkhome.logoutwatcher.plist:
    source: "puppet:///modules/profile/mac/com.theclarkhome.logoutwatcher.plist"
  /usr/local/share/Home.prf:
    source: "puppet:///modules/profile/mac/Home.prf"
  /usr/local/share/default.prf:
    source: "puppet:///modules/profile/mac/default.prf"
  /usr/local/share/Preferences.prf:
    source: "puppet:///modules/profile/mac/Preferences.prf"
  /usr/local/share/common.prf:
    source: "puppet:///modules/profile/mac/common.prf"
  /usr/local/bin/UnisonHomeSync.sh:
    source: "puppet:///modules/profile/mac/UnisonHomeSync.sh"
    mode: "0775"
  /usr/local/bin/SetupHomeSync.sh:
    source: "puppet:///modules/profile/mac/SetupHomeSync.sh"
    mode: "0775"
  /usr/local/bin/logoutwatcher.sh:
    source: "puppet:///modules/profile/mac/logoutwatcher.sh"
    mode: "0775"
  /etc/newsyslog.d/unison.conf:
    source: "puppet:///modules/profile/mac/unison.conf"
  /Library/Logs/unison.log:
    mode: "0666"



# packages to be installed
profile::base::homebrew::defaults:
  user: gary
profile::base::homebrew::objects:
  keeweb:
    ensure: installed
  amazon-music:
    ensure: installed
  firefox:
    ensure: installed
  sonos:
    ensure: installed
  chrome:
    ensure: purged
  munki:
    ensure: purged

# vim: sw=2:ai:nu expandtab
