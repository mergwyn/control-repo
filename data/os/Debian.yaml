---

# puppet agent
puppet::puppet_server:                            "echo.%{trusted.domain}"
puppet::manage_repos:                             false
puppet::structured_facts:                         true

# TODO turn backuppc::client::scripts into common settings 
profile::app::backuppc::client::scripts:                '/etc/backuppc-scripts'
profile::app::backuppc::client::preuser:                "%{lookup('profile::app::backuppc::client::scripts')}/DumpPreUser"
profile::app::backuppc::client::postuser:               "%{lookup('profile::app::backuppc::client::scripts')}/DumpPostUser"

# set nginx package
nginx::package_name:                              'nginx-extras'
nginx::server_purge:                              true

samba::params::sernetpkgs:                        false
samba::classic::domain:                           "%{lookup('defaults::workgroup')}"
samba::classic::realm:                            "%{lookup('defaults::realm')}"

# backuppc client
profile::app::backuppc::client::backuppc_hostname:     "foxtrot.%{domain}"
profile::app::backuppc::client::backup_files_exclude:
  '/':
    - '$RECYCLE.BIN'
    - '.AppleDouble'
    - '.bash_history'
    - '.bundle/'
    - '.cache/'
    - '/dev'
    - '.dvdcss'
    - 'exclude'
    - '.fsck'
    - '.gdfuse'
    - '.gem'
    - '.git/'
    - 'gsyncit.log*'
    - 'home/*/Downloads/'
    - '.journal'
    - '.kube/cache'
    - '*.ldb'
    - '**/Library/Caches/'
    - '**/Library*/Mail/Caches/'
    - '**/Library*/Mail/V3/'
    - '**/.linuxkit/cache/'
    - '**/.local/cache'
    - '**/.local/lib/'
    - '*/lost+found*'
    - '**/media/.config/Radarr/logs*'
    - '**/Music/iTunes/Album Artwork/'
    - '**/Music/iTunes/iTunes Media/Automatically*/'
    - '**/Music/Music/Previous Libraries*/'
    - 'nobackup'
    - '.npm/'
    - 'null'
    - '/opt/puppetlabs/puppet/cache'
    - '/opt/puppetlabs/puppet/pdk/share/cache'
    - '/opt/puppetlabs/puppet/public/last_run_summary.yaml'
    - '/opt/puppetlabs/server/data/puppetserver/reports'
    - '*.original'
    - '.osync_workdir'
    - '*.ova'
    - '*.pbd'
    - '.pdk/cache'
    - '.pdk/cache/'
    - '/proc'
    - '**/.r10k/cache/'
    - '**/.r10k/cache/'
    - '**/.r10k/git/'
    - '**/.r10k/git/'
    - 'random'
    - '.recycle'
    - '*Recycle Bin*'
    - '/run'
    - '/run/containerd/runc/k8s.io/'
    - '/run/k3s/containerd'
    - '/run/udev'
    - '*.sock'
    - '.Spotlight-V100/'
    - '/srv/seaweedfs'
    - '/srv/mayastor'
    - '**/.ssh/ctl'
    - '/sys'
    - '*.tar'
    - '.TemporaryItems/'
    - 'tmp/'
    - '.Trash/'
    - '*/trashbox*'
    - '.Trashes'
    - '**/.unison/ar*'
    - '**/.unison/fp*'
    - '**/.unison/unison.log'
    - 'urandom'
    - '/usr/lib/debug'
    - 'var/cache/'
    - '/var/lib/apt/lists'
    - '/var/lib/containerd/io.containerd.content.v1.content'
    - '/var/lib/dkms/open-vm-tools'
    - '/var/lib/dkms/spl'
    - '/var/lib/dkms/zfs'
    - '/var/lib/kubelet/plugins/kubernetes.io/csi/seaweedfs-csi-driver'
    - '/var/lib/kubelet/pods'
    - 'var/lib/landscape/landscape-sysinfo.cache'
    - '/var/lib/minidlna/art_cache'
    - '/var/lib/mlocate/mlocate.db*'
    - '/var/lib/mysql/ib*'
    - '/var/lib/mysql/zabbix*'
    - '/var/lib/php/sessions/*'
    - 'var/lib/postfix/smtp_scache.db'
    - '/var/lib/rancher/k3s/agent/containerd'
    - 'var/lib/rancher/k3s/server/db/etcd/'
    - '/var/lib/rancher/k3s/storage'
    - 'var/lib/samba/winbindd_privileged/pipe'
    - 'var/lib/sss/pipes'
    - 'var/log/'
    - '/var/snap'
    - 'var/spool/postfix'
    - '/var/webmin/output'
    - '*.vdi'
    - '*.vmdk'
    - 'zero'
    - '.zfs'
